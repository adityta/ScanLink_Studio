<!doctype html>
<html lang="en">
<head>
    <!-- Full Favicon Pack -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">

  <script src="seo-auto.js"></script>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>vCard QR Maker — ScanLink Studio</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
  <style>
    :root{
      --bg:#f4f6fb; --card:#ffffff; --primary:#0f47d3; --muted:#6b7280;
      --glass: rgba(15,71,211,0.06);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:'Poppins',sans-serif;background:var(--bg);color:#111;-webkit-font-smoothing:antialiased}
    header{background:linear-gradient(90deg,#0f47d3,#7c3aed);color:#fff;padding:14px 18px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,#00d2ff,#9b5cff);display:flex;align-items:center;justify-content:center;color:#021024;font-weight:700}
    .title{font-size:16px;font-weight:700}
    nav a{color:white;text-decoration:none;margin-left:12px;font-weight:600}
    main{max-width:980px;margin:22px auto;padding:18px}
    .toolCard{background:var(--card);padding:18px;border-radius:12px;border:1px solid rgba(0,0,0,0.04);box-shadow:0 6px 24px rgba(2,6,23,0.04)}
    .row{display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap}
    .formCol{flex:1;min-width:260px}
    .previewCol{width:320px;min-width:260px;display:flex;flex-direction:column;align-items:center;gap:12px}
    label{display:block;margin:8px 0 6px;font-weight:600;color:#111;font-size:14px}
    input,textarea,select{width:100%;padding:10px;border-radius:10px;border:1px solid #e8eef6;background:#fbfcff;font-size:14px}
    textarea{min-height:80px;resize:vertical}
    .actions{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
    button{background:var(--primary);color:#fff;padding:10px 14px;border:0;border-radius:10px;cursor:pointer;font-weight:700}
    button.secondary{background:transparent;color:var(--primary);border:1px solid rgba(15,71,211,0.12)}
    #qr{background:linear-gradient(180deg,#fff,#f7f9ff);padding:18px;border-radius:12px;border:1px solid rgba(2,6,23,0.03);display:flex;align-items:center;justify-content:center}
    .note{font-size:13px;color:var(--muted);margin-top:8px;text-align:center}
    footer{background:#0f47d3;color:#fff;text-align:center;padding:16px 12px;margin-top:28px;border-radius:8px}
    .linksSmall{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:8px}
    .linksSmall a{color:rgba(255,255,255,0.95);text-decoration:none;font-weight:600}
    @media (max-width:800px){
      .previewCol{width:100%}
      .row{flex-direction:column}
    }
  </style>
</head>
<body>

<header>
  <div class="brand">
    <div class="logo">SL</div>
    <div>
      <div class="title">ScanLink Studio</div>
      <div style="font-size:12px;color:rgba(255,255,255,0.85)">All-in-one client-side tools</div>
    </div>
  </div>
  <nav>
    <a href="index.html">Home</a>
    <a href="qr-generator.html">QR Generator</a>
    <a href="wifi-qr.html">WiFi QR</a>
    <a href="batch-qr.html">Batch QR</a>
  </nav>
</header>

<main>
  <div class="toolCard">
    <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
      <div>
        <h2 style="margin:0;color:var(--primary)">vCard QR Maker</h2>
        <p style="margin:6px 0 0;color:var(--muted)">Create a contact vCard and generate a downloadable QR — private & client-side.</p>
      </div>
      <div style="text-align:right">
        <div style="font-size:12px;color:var(--muted)">Tool</div>
        <div style="font-weight:700;color:#021024">vCard → QR</div>
      </div>
    </div>

    <hr style="margin:16px 0;border:none;border-top:1px solid #eef2ff">

    <div class="row">
      <div class="formCol">
        <label>Full Name *</label>
        <input id="name" placeholder="e.g. Ankit Sharma">

        <label>Company</label>
        <input id="org" placeholder="Organization">

        <label>Title</label>
        <input id="title" placeholder="Job title">

        <label>Phone</label>
        <input id="phone" placeholder="+91 98765 43210">

        <label>Email</label>
        <input id="email" placeholder="name@example.com">

        <label>Website</label>
        <input id="website" placeholder="https://example.com">

        <label>Address</label>
        <textarea id="address" placeholder="Street, City, State, Country"></textarea>

        <div style="display:flex;gap:10px;margin-top:8px;align-items:center">
          <label style="margin:0;font-weight:600">Format</label>
          <select id="vcfFormat" style="width:160px;border-radius:10px">
            <option value="3.0">vCard 3.0</option>
            <option value="4.0">vCard 4.0</option>
          </select>
        </div>

        <div class="actions">
          <button id="gen">Generate QR</button>
          <button id="download" class="secondary" disabled>Download PNG</button>
          <button id="copy" class="secondary" disabled>Copy vCard</button>
        </div>

        <div style="margin-top:10px;font-size:13px;color:var(--muted)">
          Tip: Fill only the fields you want to share. Everything is generated in the browser.
        </div>
      </div>

      <div class="previewCol">
        <div id="qr" aria-live="polite">
          <div style="text-align:center;color:var(--muted)">
            <div style="font-weight:700;margin-bottom:6px">QR Preview</div>
            <div class="note">No QR yet — click "Generate QR"</div>
          </div>
        </div>

        <div style="width:100%;text-align:center">
          <button id="open-card" class="secondary" style="width:100%">Open vCard (preview)</button>
        </div>

        <div class="note">Downloaded PNG will contain the QR. Use "Copy vCard" to copy raw vCard text.</div>
      </div>
    </div>
  </div>
</main>

<footer>
  © 2025 ScanLink Studio
  <div class="linksSmall">
    <a href="about.html">About</a>
    <a href="privacy.html">Privacy</a>
    <a href="contact.html">Contact</a>
  </div>
</footer>

<script>
  // QR + vCard logic (client-side)
  const genBtn = document.getElementById('gen');
  const dBtn = document.getElementById('download');
  const copyBtn = document.getElementById('copy');
  const openBtn = document.getElementById('open-card');
  let lastCanvas = null;
  let lastVcardText = '';

  function buildVCard(v, version){
    // Carefully escape special characters per vCard spec (simple handling)
    const esc = s => s.replace(/[,;\\n\\r]/g, (m) => (m === '\\n' ? '\\n' : '\\' + m));
    const lines = [
      'BEGIN:VCARD',
      `VERSION:${version}`,
      `FN:${esc(v.name)}`
    ];
    if(v.org) lines.push(`ORG:${esc(v.org)}`);
    if(v.title) lines.push(`TITLE:${esc(v.title)}`);
    if(v.phone) lines.push(`TEL;TYPE=CELL:${esc(v.phone)}`);
    if(v.email) lines.push(`EMAIL;TYPE=INTERNET:${esc(v.email)}`);
    if(v.address) lines.push(`ADR:${esc(v.address)}`);
    if(v.website) lines.push(`URL:${esc(v.website)}`);
    lines.push('END:VCARD');
    return lines.join('\\n');
  }

  genBtn.addEventListener('click', async ()=>{
    const v = {
      name: document.getElementById('name').value.trim(),
      org: document.getElementById('org').value.trim(),
      title: document.getElementById('title').value.trim(),
      phone: document.getElementById('phone').value.trim(),
      email: document.getElementById('email').value.trim(),
      website: document.getElementById('website').value.trim(),
      address: document.getElementById('address').value.trim()
    };
    if(!v.name){ alert('Please enter full name'); return; }
    const version = document.getElementById('vcfFormat').value || '3.0';
    const vcardText = buildVCard(v, version);
    lastVcardText = vcardText;

    // generate canvas QR
    const canvas = document.createElement('canvas');
    try{
      await QRCode.toCanvas(canvas, vcardText, { width:420, margin:2 });
    }catch(err){
      alert('QR generation failed: '+err);
      return;
    }

    // style preview size
    const q = document.getElementById('qr');
    q.innerHTML = '';
    canvas.style.width='220px';
    canvas.style.height='220px';
    canvas.style.borderRadius='6px';
    q.appendChild(canvas);
    lastCanvas = canvas;

    dBtn.disabled = false;
    copyBtn.disabled = false;
  });

  dBtn.addEventListener('click', ()=>{
    if(!lastCanvas) return;
    const a = document.createElement('a');
    a.href = lastCanvas.toDataURL('image/png');
    a.download = 'vcard-qr.png';
    a.click();
  });

  copyBtn.addEventListener('click', async ()=>{
    if(!lastVcardText) return;
    try{
      await navigator.clipboard.writeText(lastVcardText);
      alert('vCard text copied to clipboard');
    }catch(e){
      // fallback
      const ta = document.createElement('textarea');
      ta.value = lastVcardText;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand('copy');
      document.body.removeChild(ta);
      alert('vCard text copied to clipboard');
    }
  });

  openBtn.addEventListener('click', ()=>{
    if(!lastVcardText){
      alert('No vCard to preview. Generate first.');
      return;
    }
    const blob = new Blob([lastVcardText], { type: 'text/vcard' });
    const url = URL.createObjectURL(blob);
    window.open(url, '_blank');
    // release object URL after a while
    setTimeout(()=> URL.revokeObjectURL(url), 30000);
  });
</script>

</body>
</html>
